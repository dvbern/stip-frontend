<h3 class="mt-4">
  {{
    'shared.form.eltern.' +
      (elternteil.elternTyp === ElternTyp.MUTTER ? 'mutter' : 'vater') +
      '.title' | translate
  }}
</h3>

<form [formGroup]="form" novalidate class="mt-4" (ngSubmit)="handleSave()">
  <div class="row g-4 my-2">
    <mat-form-field dvSharedUiFormField class="col-12 col-md-6 col-xl-4">
      <mat-label>{{
        'shared.form.shared.social-insurance-number.label' | translate
      }}</mat-label>
      <input
        matInput
        formControlName="sozialversicherungsnummer"
        placeholder="756.xxxx.xxxx.xx"
        [maskito]="MASK_SOZIALVERSICHERUNGSNUMMER"
      />
      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
      <mat-error *dvSharedUiFormMessageError="'ahv'">
        {{ 'shared.form.error.ahv' | translate }}
      </mat-error>
      <mat-error *dvSharedUiFormMessageError="'notUniqueAhv'">
        {{ 'shared.form.error.notUniqueAhv' | translate }}
      </mat-error>
    </mat-form-field>
  </div>

  <div class="row g-4 my-2">
    <mat-form-field dvSharedUiFormField class="col-12 col-md-6 col-xl-4">
      <mat-label>{{
        'shared.form.shared.lastname.label' | translate
      }}</mat-label>
      <input formControlName="nachname" matInput type="text" />
      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
    </mat-form-field>
    <mat-form-field dvSharedUiFormField class="col-12 col-md-6 col-xl-4">
      <mat-label>{{
        'shared.form.shared.firstname.label' | translate
      }}</mat-label>
      <input formControlName="vorname" matInput type="text" />
      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
    </mat-form-field>
  </div>

  <div class="row g-4 my-2">
    <dv-shared-ui-form-address
      class="col-12 col-xl-8"
      [group]="form.controls.adresse"
      [laender]="laender"
      [language]="languageSig()"
    />
  </div>

  <div class="row g-4">
    <div class="col-12 col-xl-8">
      <mat-checkbox
        type="checkbox"
        formControlName="identischerZivilrechtlicherWohnsitz"
        >{{
          'shared.form.shared.identical-civil-residence.label' | translate
        }}</mat-checkbox
      >
    </div>
  </div>
  <!-- alternative civil residence -->
  <div
    class="row g-4 mt-1"
    *ngIf="!form.value.identischerZivilrechtlicherWohnsitz"
  >
    <div class="col-12 col-xl-8">
      <label class="mb-2">{{
        'shared.form.shared.alternative-civil-residence.title' | translate
      }}</label>
      <div class="row g-4">
        <!-- PLZ -->
        <mat-form-field dvSharedUiFormField class="col-5 col-md-4 col-xl-3">
          <mat-label
            >{{ 'shared.form.shared.address.zipcode.label' | translate }}
          </mat-label>
          <input
            matInput
            type="text"
            formControlName="identischerZivilrechtlicherWohnsitzPLZ"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Ort -->
        <mat-form-field dvSharedUiFormField class="col-7 col-md-8 col-xl-9">
          <mat-label
            >{{ 'shared.form.shared.address.city.label' | translate }}
          </mat-label>
          <input
            matInput
            type="text"
            formControlName="identischerZivilrechtlicherWohnsitzOrt"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
    </div>
  </div>

  <h3 class="pt-5">{{ 'shared.weiterangaben' | translate }}</h3>

  <div class="row g-4 my-2">
    <!-- GEBURTSDATUM -->
    <mat-form-field dvSharedUiFormField class="col-12 col-md-6 col-xl-4">
      <mat-label>{{
        'shared.form.shared.birthday.label' | translate
      }}</mat-label>

      <input
        matInput
        type="text"
        placeholder="dd.mm.yyyy"
        formControlName="geburtsdatum"
        (blur)="onGeburtsdatumBlur($event)"
      />

      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
      <mat-error *dvSharedUiFormMessageError="'dateFormat'">
        {{ 'shared.form.error.dateFormat' | translate }}
      </mat-error>
      <mat-error *dvSharedUiFormMessageError="'minDate'">
        {{ 'shared.form.error.minDatePast' | translate }}
      </mat-error>
      <mat-error *dvSharedUiFormMessageError="'maxDate'">
        {{ 'shared.form.error.maxDatePast' | translate }}
      </mat-error>
    </mat-form-field>
    <mat-form-field dvSharedUiFormField class="col-12 col-md-6 col-xl-4">
      <mat-label>{{ 'shared.form.shared.phone.label' | translate }}</mat-label>
      <input matInput type="text" formControlName="telefonnummer" />
      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
      <mat-error *dvSharedUiFormMessageError="'telefonnummer'">
        {{ 'shared.form.error.telefonnummer' | translate }}
      </mat-error>
    </mat-form-field>
  </div>

  <div class="row g-4 my-2">
    <mat-radio-group
      formControlName="ausweisbFluechtling"
      dvSharedUiFormField
      class="col-12 d-flex flex-column"
    >
      <label>{{
        'shared.form.eltern.ausweisbFluechtling.' +
          (elternteil.elternTyp === ElternTyp.MUTTER ? 'mutter' : 'vater') +
          '.label' | translate
      }}</label>
      <mat-radio-button [value]="true">{{
        'shared.form.radio.yes' | translate
      }}</mat-radio-button>
      <mat-radio-button [value]="false">{{
        'shared.form.radio.no' | translate
      }}</mat-radio-button>
      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
    </mat-radio-group>
  </div>
  <div class="row g-4 my-2">
    <mat-radio-group
      formControlName="ergaenzungsleistungAusbezahlt"
      dvSharedUiFormField
      class="col-12 d-flex flex-column"
    >
      <label>{{
        'shared.form.eltern.ergaenzungsleistungAusbezahlt.label' | translate
      }}</label>
      <mat-radio-button [value]="true">{{
        'shared.form.radio.yes' | translate
      }}</mat-radio-button>
      <mat-radio-button [value]="false">{{
        'shared.form.radio.no' | translate
      }}</mat-radio-button>
      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
    </mat-radio-group>
  </div>
  <div class="row g-4 my-2">
    <mat-radio-group
      formControlName="sozialhilfebeitraegeAusbezahlt"
      dvSharedUiFormField
      class="col-12 d-flex flex-column"
    >
      <label>{{
        'shared.form.eltern.sozialhilfebeitraegeAusbezahlt.label' | translate
      }}</label>

      <mat-radio-button [value]="true">{{
        'shared.form.radio.yes' | translate
      }}</mat-radio-button>

      <mat-radio-button [value]="false">{{
        'shared.form.radio.no' | translate
      }}</mat-radio-button>

      <mat-error *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </mat-error>
    </mat-radio-group>
  </div>

  <!-- Buttons -->
  <dv-shared-ui-step-form-buttons>
    <button
      *ngIf="elternteil.id && !view$().readonly"
      type="button"
      class="btn btn-outline-primary d-flex align-items-center justify-content-center"
      (click)="handleDelete()"
      [title]="'shared.form.lebenslaufitem.delete' | translate"
    >
      <i class="material-symbols-rounded me-2">delete</i>
      {{ 'shared.form.delete' | translate }}
    </button>

    <button
      type="button"
      class="btn btn-outline-primary"
      (click)="handleCancel()"
    >
      {{ 'shared.form.back' | translate }}
    </button>
    <button type="submit" class="btn btn-primary" *ngIf="!view$().readonly">
      {{ 'shared.form.save-and-back' | translate }}
    </button>
  </dv-shared-ui-step-form-buttons>
</form>
